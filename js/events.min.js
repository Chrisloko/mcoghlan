"use strict";let dev=!1,contentViewSent=!1,test_event_code="TEST3385";const API_URL="https://api.mcoghlan.mx/event",GALLERY=["galeria","salas","habitaciones","comedores","cocinas","banos","terrazas","desayunadores","ninos","estudios","bares","vestibulos","vestidores","bibliotecas","amenidades","oficinas","hoteles","restaurantes","accesorios"],BRAND_TAGS=["Interiorismo Residencial","Dise침o Comercial","Proyecto Arquitect칩nico"],PERSONAL_TAGS=["Mariangel Coghlan, mi perspectiva"];let getParameterByName=function(e,t=window.location.href){e=e.replace(/[\[\]]/g,"\\$&");let o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null},getCookie=function(e){let t=e+"=",o=decodeURIComponent(document.cookie).split(";");for(var n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},get_timestamp=function(){return Math.floor(new Date/1e3)},get_fbc=function(){let e=getCookie("_fbc");if(e){let t=getParameterByName("fbclid");t&&(e="fb.1."+get_timestamp()+t)}return e},collectData=function(){return{fbp:getCookie("_fbp"),fbc:get_fbc(),product:"",category:"",event_source_url:window.location.href}},verifyHistory=function(){getCookie("mc_history").split("|").length>3&&(sendEvent("UsuarioNavega"),dev&&console.log("usuarioNavega"))},verifyGalleryHistory=function(){getCookie("mc_gallery_history").split("|").length>2&&(sendEvent("NavegaGaleria"),dev&&console.log("NavegaGaleria"))},setMCCookie=function(){let e=getCookie("mc_history"),t=new Date;document.cookie="mc_history="+(e+t.getTime()+"|"),verifyHistory()},setGalleryHistoryCookie=function(){let e=getCookie("mc_gallery_history"),t=window.location.pathname.split("/").pop();if(GALLERY.includes(t)){let o=new Date;document.cookie=`mc_gallery_history=${e+t+"."+o.getTime()}|`,verifyGalleryHistory()}},shouldSendEvent=function(e,t,o){window.location.pathname.includes("ebooks")&&sendEvent({eventName:e,contentCategory:o,contentName:t})},shouldSendTagEvent=function(){if("blog"!==window.location.pathname.split("/").pop()&&window.location.pathname.includes("blog")){let e=Array.prototype.slice.call(document.querySelectorAll(".blog-section .topic-link")).map((e=>e.innerText.toUpperCase())),t=[...new Set(e)],o=document.querySelector("h1").innerText;BRAND_TAGS.map((e=>e.toUpperCase())).some((e=>t.includes(e)))?(console.log("Should send event BlogTag type Brand"),sendEvent({eventName:"BlogTag",contentCategory:"Marca",contentName:o})):PERSONAL_TAGS.map((e=>e.toUpperCase())).some((e=>t.includes(e)))&&(console.log("Should send event BlogTag type Personal"),sendEvent({eventName:"BlogTag",contentCategory:"Personal",contentName:o}))}},sendEvent=function(e,t){let o=collectData();o.event=e,o.action_source=t||"website",test_event_code&&(o.test_event_code=test_event_code);let n={method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}};fetch(API_URL,n).then((e=>e.json())).catch((e=>{dev&&(console.log("Respuesta de la petici칩n: "+JSON.stringify(e)),console.error("Error:",e))})).then((e=>{dev&&console.log("Respuesta de la petici칩n: "+JSON.stringify(e))}))};window.addEventListener("load",(function(){setMCCookie(),setGalleryHistoryCookie(),shouldSendTagEvent(),document.getElementById("contact-event")&&document.getElementById("contact-event").addEventListener("click",(function(){sendEvent("Contact")}))})),window.addEventListener("scroll",(function(e){!contentViewSent&&window.pageYOffset>700&&(sendEvent("ViewContent"),contentViewSent=!0)}));